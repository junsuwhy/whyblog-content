---
title: "行為驅動開發 (BDD): 讓所有人都能理解的軟體開發"
---

# 行為驅動開發 (BDD) 完整指南

你是否曾經遇過這種情況：開發團隊辛苦做出的功能，卻不是客戶或老闆想要的？或是，規格文件落落長，工程師、PM、QA 的理解卻南轅北轍？

這些溝通上的落差，正是軟體開發中最昂貴的成本之一。為了解決這個問題，「行為驅動開發」(Behavior-Driven Development, BDD) 應運而生。

## 什麼是 BDD？

行為驅動開發（Behavior-Driven Development, BDD）是一種敏捷軟體開發方法，它脫胎自「測試驅動開發」(TDD)，但更強調 **從使用者的行為和業務角度出發** 來定義軟體規格。

BDD 的核心理念是：**軟體開發應該是一個團隊運動**。它鼓勵開發人員、測試人員、產品經理，甚至是客戶，使用一種共通的、易於理解的語言來描述軟體應該如何運作。

這個共通語言，就是 BDD 的精髓所在。

## BDD 的核心：Gherkin 語言

BDD 採用一種名為 **Gherkin** 的語言來撰寫「可執行的規格」。Gherkin 的語法非常接近自然語言，讓非技術人員也能輕鬆讀寫。它主要由三個關鍵字組成：

### Given-When-Then 結構

* **Given (情境)**：描述一個初始的背景或狀態
* **When (當...時)**：描述使用者執行的某個動作或觸發的事件  
* **Then (那麼)**：描述預期的結果或系統應有的反應

讓我們用一個生活化的例子來看看：

```gherkin
# 標題: ATM 提款

情境: 我的銀行帳戶有 10,000 元
而且: 我有一張有效的提款卡
而且: ATM 提款機有足夠的鈔票

當: 我要求提領 3,000 元

那麼: ATM 應該要吐出 3,000 元
而且: 我的帳戶餘額應剩下 7,000 元
```

看到了嗎？即使你不是工程師，也能完全理解這段文字描述的功能需求。這份文件不僅是規格，更可以直接轉化為自動化測試案例，確保程式碼完全符合預期行為。

## BDD 與其他開發方法的比較

| 特點 | BDD (行為驅動) | TDD (測試驅動) | SDD (規格驅動) |
|------|---------------|---------------|---------------|
| **起點** | 使用者行為場景 | 失敗的單元測試 | 詳細規格文件 |
| **重點** | 業務價值與行為 | 程式碼正確性 | 需求清晰度 |
| **語言** | Gherkin (自然語言) | 程式測試碼 | 結構化文件 |
| **使用者** | 整個跨職能團隊 | 主要是開發者 | 全體利害關係人 |
| **產出** | 可執行的活文件 | 高覆蓋率測試 | 完整規格體系 |

### BDD vs. TDD 的關鍵差異

**TDD (測試驅動開發)**：
- 更關注 **技術實現**
- 開發者先寫「失敗的單元測試」，再寫實作程式碼
- 確認「程式碼是否正確」

**BDD (行為驅動開發)**：  
- 更關注 **業務價值和系統行為**
- 從使用者角度用自然語言描述功能
- 確認「軟體是否做了正確的事」

可以說，BDD 是 TDD 的演進，它將測試的範疇從技術層面提升到業務層面。

## 為什麼要使用 BDD？

| 優勢 | 說明 |
| :--- | :--- |
| **促進溝通與協作** | 共通的語言打破技術與業務間的隔閡，讓所有人都能對齊目標 |
| **需求更清晰** | 透過 Given-When-Then 結構化描述，有效減少模糊需求，避免誤解 |
| **活的文件** | 規格即測試，文件隨程式碼演進，永遠保持最新狀態 |
| **專注商業價值** | 強迫團隊思考「為什麼」要做功能，確保每行程式碼都解決實際問題 |

## BDD 實踐範例

讓我們用一個電商網站的購物車功能來示範 BDD 的完整流程：

### 範例 1：基本購物車功能

```gherkin
功能: 購物車商品管理
  作為一個線上購物的使用者
  我希望能夠管理購物車中的商品
  以便我可以控制我要購買的物品

  情境: 加入商品到購物車
    假設 我在商品頁面
    而且 該商品有庫存
    當 我點擊「加入購物車」按鈕
    那麼 商品應該出現在購物車中
    而且 購物車圖示應該顯示商品數量

  情境: 移除購物車中的商品
    假設 我的購物車中有 1 件 "iPhone 14"
    當 我點擊該商品的「移除」按鈕
    那麼 該商品應該從購物車中消失
    而且 購物車應該顯示為空
```

### 範例 2：複雜業務邏輯

```gherkin
情境: 計算含運費的總金額
  假設 我的購物車中有以下商品:
    | 商品名稱 | 單價 | 數量 |
    | 筆記型電腦 | 30000 | 1 |
    | 滑鼠 | 500 | 2 |
  而且 運費計算規則為「滿 35000 免運費，否則運費 100 元」
  當 我查看購物車總計
  那麼 商品小計應該顯示 31000 元
  而且 運費應該顯示 100 元
  而且 總金額應該顯示 31100 元
```

看到了嗎？這些場景不僅清楚描述了功能需求，也可以直接轉換為自動化測試，確保實作符合預期。

## BDD 的最佳實踐

### 1. 從使用者故事開始
- 總是從使用者的角度思考功能
- 先定義「為什麼」需要這個功能，再思考「如何」實作

### 2. 保持場景的獨立性
- 每個場景都應該能獨立執行
- 避免場景間的相依性

### 3. 使用具體的例子
- 避免使用「一些」、「某些」等模糊詞彙
- 提供明確的數據和預期結果

### 4. 與團隊協作撰寫
- 讓 PM、開發者、QA 一起參與場景撰寫
- 透過討論澄清需求細節

## 常見挑戰與解決方案

### 挑戰 1：場景寫得太技術化
**解決方案**：回到使用者觀點，用業務語言而非技術術語描述

### 挑戰 2：場景過於複雜
**解決方案**：將複雜場景拆分成多個簡單場景，每個場景聚焦單一行為

### 挑戰 3：團隊不習慣協作撰寫
**解決方案**：從小範圍開始，建立定期的「三方會議」(Three Amigos) 文化

## 結論

BDD 不僅僅是一種測試方法，它更是一種促進溝通、釐清需求、專注價值的開發「文化」。它強調：

- **共同語言**：讓所有團隊成員都能理解和參與
- **行為導向**：關注系統應該做什麼，而非如何做
- **協作優先**：透過對話和協作減少誤解
- **持續驗證**：確保軟體真正解決使用者問題

透過 Gherkin 這樣簡單但強大的語法，BDD 將團隊中的每個人串連起來，共同打造出真正符合使用者期待的成功產品。

下次當你啟動新專案或開發新功能時，不妨試試看用 BDD 的方式，先從一個簡單的 `Given-When-Then` 故事開始吧！

## 延伸閱讀

- [Cucumber 官方文檔：BDD 工具](https://cucumber.io/docs/bdd/)
- [The BDD Books - 經典 BDD 學習資源](https://bddbooks.com/)
- [Gherkin 語法完整指南](https://cucumber.io/docs/gherkin/)
